<!DOCTYPE html>
<html>
<head>
  <title>Temperature</title>
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
	<link rel="stylesheet" type="text/css" href="master.css" />
    <link rel="stylesheet" type="text/css" href="tempVisual.css"/>
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
  <script type="text/javascript" src="master.js"></script>
  <!-- Load an icon library to show a hamburger menu (bars) on small screens -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>

  <div id="nav-placeholder"></div>
  <script>
    $(function(){
      $("#nav-placeholder").load("navigation.html", function() {
        $("a[href= 'about.html']").addClass("selected");
      });
    });
  </script>
<div id="insns">
    <p id="instructions">
        How to use:
    </p>
    <p id="instructions2">
        Select your country using the dropdown menu.
    </p>
    <p id="instructions3">
        Use the right and left arrow keys to navigate bewteen years.
    </p>

    <p id="instructions4">
            Use the mouse to hover over to view the temperature.
    </p>
    <p id="instructionsMonth">
            Months are shown in descending order where month 11 is December and month 0 is January.
    </p>        
</div>
<select id="inds">
    <option value="crucy.v3.23.1901.2014.Afghanistan.tmp.tsv">Afghanistan</option>
    <option value="crucy.v3.23.1901.2014.Albania.tmp.tsv">Albania</option>
    <option value="crucy.v3.23.1901.2014.Algeria.tmp.tsv">Algeria</option>
    <option value="crucy.v3.23.1901.2014.Andorra.tmp.tsv">Andorra</option>
    <option value="crucy.v3.23.1901.2014.Angola.tmp.tsv">Angola</option>
    <option value="crucy.v3.23.1901.2014.Anguilla.tmp.tsv">Anguilla</option>
    <option value="crucy.v3.23.1901.2014.Antigua.tmp.tsv">Antigua</option>
    <option value="crucy.v3.23.1901.2014.Argentina.tmp.tsv">Argentina</option>
    <option value="crucy.v3.23.1901.2014.Armenia.tmp.tsv">Armenia</option>
    <option value="crucy.v3.23.1901.2014.Ascension.tmp.tsv">Ascension</option>
    <option value="crucy.v3.23.1901.2014.Australia.tmp.tsv">Australia</option>
    <option value="crucy.v3.23.1901.2014.Austria.tmp.tsv">Austria</option>
    <option value="crucy.v3.23.1901.2014.Azerbaijan.tmp.tsv">Azerbaijan</option>
    <option value="crucy.v3.23.1901.2014.Bahamas.tmp.tsv">Bahamas</option>
    <option value="crucy.v3.23.1901.2014.Bahrain.tmp.tsv">Bahrain</option>
    <option value="crucy.v3.23.1901.2014.Bangladesh.tmp.tsv">Bangladesh</option>
    <option value="crucy.v3.23.1901.2014.Barbados.tmp.tsv">Barbados</option>
    <option value="crucy.v3.23.1901.2014.Barbuda.tmp.tsv">Barbuda</option>
    <option value="crucy.v3.23.1901.2014.Belarus.tmp.tsv" >Belarus</option>
    <option value="crucy.v3.23.1901.2014.Belgium.tmp.tsv">Belgium</option>
    <option value="crucy.v3.23.1901.2014.Belize.tmp.tsv">Belize</option>
    <option value="crucy.v3.23.1901.2014.Benin.tmp.tsv">Benin</option>
    <option value="crucy.v3.23.1901.2014.Bermuda.tmp.tsv">Bermuda</option>
    <option value="crucy.v3.23.1901.2014.Bhutan.tmp.tsv">Bhutan</option>
    <option value="crucy.v3.23.1901.2014.Bolivia.tmp.tsv">Bolivia</option>
    <option value="crucy.v3.23.1901.2014.Botswana.tmp.tsv">Botswana</option>
    <option value="crucy.v3.23.1901.2014.Brazil.tmp.tsv">Brazil</option>
    <option value="crucy.v3.23.1901.2014.Brunei.tmp.tsv">Brunei</option>
    <option value="crucy.v3.23.1901.2014.Bulgaria.tmp.tsv">Bulgaria</option>
    <option value="crucy.v3.23.1901.2014.Burkina_Faso.tmp.tsv">Burkina Faso</option>
    <option value="crucy.v3.23.1901.2014.Burundi.tmp.tsv">Burundi</option>
    <option value="crucy.v3.23.1901.2014.Cambodia.tmp.tsv">Cambodia</option>
    <option value="crucy.v3.23.1901.2014.Cameroon.tmp.tsv">Cameroon</option>
    <option value="crucy.v3.23.1901.2014.Canada.tmp.tsv">Canada</option>
    <option value="crucy.v3.23.1901.2014.Central_African_Rep.tmp.tsv">Central African Republic</option>
    <option value="crucy.v3.23.1901.2014.Chad.tmp.tsv">Chad</option>
    <option value="crucy.v3.23.1901.2014.Chile.tmp.tsv">Chile</option>
    <option value="crucy.v3.23.1901.2014.China.tmp.tsv">China</option>
    <option value="crucy.v3.23.1901.2014.Christmas_Isl.tmp.tsv">Christmas Island</option>
    <option value="crucy.v3.23.1901.2014.Colombia.tmp.tsv">Columbia</option>
    <option value="crucy.v3.23.1901.2014.Comoros.tmp.tsv">Comoros</option>
    <option value="crucy.v3.23.1901.2014.Congo.tmp.tsv">Congo</option>
    <option value="crucy.v3.23.1901.2014.Cook_Isl.tmp.tsv">Cook Islands</option>
    <option value="crucy.v3.23.1901.2014.Costa_Rica.tmp.tsv">Costa Rica</option>
    <option value="crucy.v3.23.1901.2014.Croatia.tmp.tsv">Croatia</option>
    <option value="crucy.v3.23.1901.2014.Cuba.tmp.tsv">Cuba</option>
    <option value="crucy.v3.23.1901.2014.Cyprus.tmp.tsv">Cyprus</option>
    <option value="crucy.v3.23.1901.2014.Czech_Republic.tmp.tsv">Czech Republic</option>
    <option value="crucy.v3.23.1901.2014.Denmark.tmp.tsv">Denmark</option>
    <option value="crucy.v3.23.1901.2014.Djibouti.tmp.tsv">Djibouti</option>
    <option value="crucy.v3.23.1901.2014.Dominica.tmp.tsv">Dominica</option>
    <option value="crucy.v3.23.1901.2014.Dominican_Republic.tmp.tsv">Dominican Republic</option>
    <option value="crucy.v3.23.1901.2014.Ecuador.tmp.tsv">Ecuador</option>
    <option value="crucy.v3.23.1901.2014.Egypt.tmp.tsv">Egypt</option>
    <option value="crucy.v3.23.1901.2014.El_Salvador.tmp.tsv">El Salvador</option>
    <option value="crucy.v3.23.1901.2014.Equatorial_Guinea.tmp.tsv">Equatorial Guinea</option>
    <option value="crucy.v3.23.1901.2014.Eritrea.tmp.tsv">Eritrea</option>
    <option value="crucy.v3.23.1901.2014.Estonia.tmp.tsv">Estonia</option>
    <option value="crucy.v3.23.1901.2014.Ethiopia.tmp.tsv">Ethiopia</option>
    <option value="crucy.v3.23.1901.2014.Falkland_Isl.tmp.tsv">Falkland Islands</option>
    <option value="crucy.v3.23.1901.2014.Fiji.tmp.tsv">Fiji</option>
    <option value="crucy.v3.23.1901.2014.Finland.tmp.tsv">Finland</option>
    <option value="crucy.v3.23.1901.2014.France.tmp.tsv">France</option>
    <option value="crucy.v3.23.1901.2014.Gabon.tmp.tsv">Gabon</option>
    <option value="crucy.v3.23.1901.2014.Gambia.tmp.tsv">Gambia</option>
    <option value="crucy.v3.23.1901.2014.Georgia.tmp.tsv">Georgia</option>
    <option value="crucy.v3.23.1901.2014.Germany.tmp.tsv">Germany</option>
    <option value="crucy.v3.23.1901.2014.Ghana.tmp.tsv">Ghana</option>
    <option value="crucy.v3.23.1901.2014.Gibraltar.tmp.tsv">Gibraltar</option>
    <option value="crucy.v3.23.1901.2014.Greece.tmp.tsv">Greece</option>
    <option value="crucy.v3.23.1901.2014.Greenland.tmp.tsv">Greenland</option>
    <option value="crucy.v3.23.1901.2014.Grenada.tmp.tsv">Grenada</option>
    <option value="crucy.v3.23.1901.2014.Guatemala.tmp.tsv">Guatemala</option>
    <option value="crucy.v3.23.1901.2014.Guinea.tmp.tsv">Guinea</option>
    <option value="crucy.v3.23.1901.2014.Guyana.tmp.tsv">Guyana</option>
    <option value="crucy.v3.23.1901.2014.Haiti.tmp.tsv">Haiti</option>
    <option value="crucy.v3.23.1901.2014.Honduras.tmp.tsv">Honduras</option>
    <option value="crucy.v3.23.1901.2014.Hong_Kong.tmp.tsv">Hong Kong</option>
    <option value="crucy.v3.23.1901.2014.Hungary.tmp.tsv">Hungary</option>
    <option value="crucy.v3.23.1901.2014.Iceland.tmp.tsv">Iceland</option>
    <option value="crucy.v3.23.1901.2014.India.tmp.tsv">India</option>
    <option value="crucy.v3.23.1901.2014.Indonesia.tmp.tsv">Indonesia</option>
    <option value="crucy.v3.23.1901.2014.Iran.tmp.tsv">Iran</option>
    <option value="crucy.v3.23.1901.2014.Iraq.tmp.tsv">Iraq</option>
    <option value="crucy.v3.23.1901.2014.Ireland.tmp.tsv">Ireland</option>
    <option value="crucy.v3.23.1901.2014.Israel.tmp.tsv">Israel</option>
    <option value="crucy.v3.23.1901.2014.Italy.tmp.tsv">Italy</option>
    <option value="crucy.v3.23.1901.2014.Jamaica.tmp.tsv">Jamaica</option>
    <option value="crucy.v3.23.1901.2014.Japan.tmp.tsv">Japan</option>
    <option value="crucy.v3.23.1901.2014.Jordan.tmp.tsv">Jordan</option>
    <option value="crucy.v3.23.1901.2014.Kazakhstan.tmp.tsv">Kazakhstan</option>
    <option value="crucy.v3.23.1901.2014.Kenya.tmp.tsv">Kenya</option>
    <option value="crucy.v3.23.1901.2014.Kiribati.tmp.tsv">Kiribati</option>
    <option value="crucy.v3.23.1901.2014.Kuwait.tmp.tsv">Kuwait</option>
    <option value="crucy.v3.23.1901.2014.Kyrgyzstan.tmp.tsv">Kyrgyzstan</option>
    <option value="crucy.v3.23.1901.2014.Laos.tmp.tsv">Laos</option>
    <option value="crucy.v3.23.1901.2014.Latvia.tmp.tsv">Latvia</option>
    <option value="crucy.v3.23.1901.2014.Lebanon.tmp.tsv">Lebanon</option>
    <option value="crucy.v3.23.1901.2014.Lesotho.tmp.tsv">Lesotho</option>
    <option value="crucy.v3.23.1901.2014.Liberia.tmp.tsv">Liberia</option>
    <option value="crucy.v3.23.1901.2014.Liechtenstein.tmp.tsv">Liechtenstein</option>
    <option value="crucy.v3.23.1901.2014.Lithuania.tmp.tsv">Lithuania</option>
    <option value="crucy.v3.23.1901.2014.Luxembourg.tmp.tsv">Luxembourg</option>
    <option value="crucy.v3.23.1901.2014.Macau.tmp.tsv">Macau</option>
    <option value="crucy.v3.23.1901.2014.Macedonia.tmp.tsv">Macedonia</option>
    <option value="crucy.v3.23.1901.2014.Madagascar.tmp.tsv">Madagascar</option>
    <option value="crucy.v3.23.1901.2014.Malawi.tmp.tsv">Malawi</option>
    <option value="crucy.v3.23.1901.2014.Malaysia.tmp.tsv">Indonesia</option>
    <option value="crucy.v3.23.1901.2014.Maldives.tmp.tsv">Maldives</option>
    <option value="crucy.v3.23.1901.2014.Mali.tmp.tsv">Mali</option>
    <option value="crucy.v3.23.1901.2014.Malta.tmp.tsv">Malta</option>
    <option value="crucy.v3.23.1901.2014.Marshall_Isl.tmp.tsv">Marshall Islands</option>
    <option value="crucy.v3.23.1901.2014.Mauritania.tmp.tsv">Mauritania</option>
    <option value="crucy.v3.23.1901.2014.Mauritius.tmp.tsv">Mauritius</option>
    <option value="crucy.v3.23.1901.2014.Mexico.tmp.tsv">Mexico</option>
    <option value="crucy.v3.23.1901.2014.Monaco.tmp.tsv">Monaco</option>
    <option value="crucy.v3.23.1901.2014.Mongolia.tmp.tsv">Mongolia</option>
    <option value="crucy.v3.23.1901.2014.Montserrat.tmp.tsv">Montserrat</option>
    <option value="crucy.v3.23.1901.2014.Morocco.tmp.tsv">Morocco</option>
    <option value="crucy.v3.23.1901.2014.Mozambique.tmp.tsv">Mozambique</option>
    <option value="crucy.v3.23.1901.2014.Namibia.tmp.tsv">Namibia</option>
    <option value="crucy.v3.23.1901.2014.Nauru.tmp.tsv">Nauru</option>
    <option value="crucy.v3.23.1901.2014.Nepal.tmp.tsv">Nepal</option>
    <option value="crucy.v3.23.1901.2014.Netherlands.tmp.tsv">Netherlands</option>
    <option value="crucy.v3.23.1901.2014.New_Caledonia.tmp.tsv">New Caledonia</option>
    <option value="crucy.v3.23.1901.2014.New_Zealand.tmp.tsv">New Zealand</option>
    <option value="crucy.v3.23.1901.2014.Nicaragua.tmp.tsv">Nicaragua</option>
    <option value="crucy.v3.23.1901.2014.Niger.tmp.tsv">Niger</option>
    <option value="crucy.v3.23.1901.2014.Nigeria.tmp.tsv">Nigeria</option>
    <option value="crucy.v3.23.1901.2014.Niue.tmp.tsv">Niue</option>
    <option value="crucy.v3.23.1901.2014.Norfolk_Isl.tmp.tsv">Norfolk Island</option>
    <option value="crucy.v3.23.1901.2014.Norway.tmp.tsv">Norway</option>
    <option value="crucy.v3.23.1901.2014.Oman.tmp.tsv">Oman</option>
    <option value="crucy.v3.23.1901.2014.Pakistan.tmp.tsv">Pakistan</option>
    <option value="crucy.v3.23.1901.2014.Panama.tmp.tsv">Panama</option>
    <option value="crucy.v3.23.1901.2014.Papua_New_Guinea.tmp.tsv">Papua New Guinea</option>
    <option value="crucy.v3.23.1901.2014.Paraguay.tmp.tsv">Paraguay</option>
    <option value="crucy.v3.23.1901.2014.Peru.tmp.tsv">Peru</option>
    <option value="crucy.v3.23.1901.2014.Philippines.tmp.tsv">Philippines</option>
    <option value="crucy.v3.23.1901.2014.Poland.tmp.tsv">Poland</option>
    <option value="crucy.v3.23.1901.2014.Portugal.tmp.tsv">Portugal</option>
    <option value="crucy.v3.23.1901.2014.Qatar.tmp.tsv">Qatar</option>
    <option value="crucy.v3.23.1901.2014.Romania.tmp.tsv">Romania</option>
    <option value="crucy.v3.23.1901.2014.Russia.tmp.tsv">Russia</option>
    <option value="crucy.v3.23.1901.2014.Rwanda.tmp.tsv">Rwanda</option>
    <option value="crucy.v3.23.1901.2014.Samoa.tmp.tsv">Samoa</option>
    <option value="crucy.v3.23.1901.2014.San_Marino.tmp.tsv">San Marino</option>
    <option value="crucy.v3.23.1901.2014.Saudi_Arabia.tmp.tsv">Saudi Arabia</option>
    <option value="crucy.v3.23.1901.2014.Senegal.tmp.tsv">Sengal</option>
    <option value="crucy.v3.23.1901.2014.Seychelles.tmp.tsv">Seychelles</option>
    <option value="crucy.v3.23.1901.2014.Sierra_Leone.tmp.tsv">Sierra Leone</option>
    <option value="crucy.v3.23.1901.2014.Singapore.tmp.tsv">Singapore</option>
    <option value="crucy.v3.23.1901.2014.Slovakia.tmp.tsv">Slovakia</option>
    <option value="crucy.v3.23.1901.2014.Slovenia.tmp.tsv">Slovenia</option>
    <option value="crucy.v3.23.1901.2014.Solomon_Isl.tmp.tsv">Solomon Islands</option>
    <option value="crucy.v3.23.1901.2014.Somalia.tmp.tsv">Somalia</option>
    <option value="crucy.v3.23.1901.2014.South_Africa.tmp.tsv">South Africa</option>
    <option value="crucy.v3.23.1901.2014.Spain.tmp.tsv">Spain</option>
    <option value="crucy.v3.23.1901.2014.Sri_Lanka.tmp.tsv">Sri Lanka</option>
    <option value="crucy.v3.23.1901.2014.Sudan.tmp.tsv">Sudan</option>
    <option value="crucy.v3.23.1901.2014.Surinam.tmp.tsv">Surinam</option>
    <option value="crucy.v3.23.1901.2014.Svalbard.tmp.tsv">Svalbard</option>
    <option value="crucy.v3.23.1901.2014.Swaziland.tmp.tsv">Swaziland</option>
    <option value="crucy.v3.23.1901.2014.Sweden.tmp.tsv">Sweden</option>
    <option value="crucy.v3.23.1901.2014.Switzerland.tmp.tsv">Switzerland</option>
    <option value="crucy.v3.23.1901.2014.Syria.tmp.tsv">Syria</option>
    <option value="crucy.v3.23.1901.2014.Tajikistan.tmp.tsv">Tajikistan</option>
    <option value="crucy.v3.23.1901.2014.Tanzania.tmp.tsv">Tanzania</option>
    <option value="crucy.v3.23.1901.2014.Thailand.tmp.tsv">Thailand</option>
    <option value="crucy.v3.23.1901.2014.Togo.tmp.tsv">Togo</option>
    <option value="crucy.v3.23.1901.2014.Tonga.tmp.tsv">Tonga</option>
    <option value="crucy.v3.23.1901.2014.Trinidad_and_Tobago.tmp.tsv">Trinidad and Tobago</option>
    <option value="crucy.v3.23.1901.2014.Tristan_da_Cunha.tmp.tsv">Tristan da Cunha</option>
    <option value="crucy.v3.23.1901.2014.Tunisia.tmp.tsv">Tunisia</option>
    <option value="crucy.v3.23.1901.2014.Turkey.tmp.tsv">Turkey</option>
    <option value="crucy.v3.23.1901.2014.Turkmenistan.tmp.tsv">Turkmenistan</option>
    <option value="crucy.v3.23.1901.2014.Tuvalu.tmp.tsv">Tuvalu</option>
    <option value="crucy.v3.23.1901.2014.Uganda.tmp.tsv">Uganda</option>
    <option value="crucy.v3.23.1901.2014.Ukraine.tmp.tsv">Ukraine</option>
    <option value="crucy.v3.23.1901.2014.United_Arab_Emirates.tmp.tsv">United Arab Emirates</option>
    <option value="crucy.v3.23.1901.2014.United_Kingdom.tmp.tsv">United Kingdom</option>
    <option value="crucy.v3.23.1901.2014.Uruguay.tmp.tsv">Uruguay</option>
    <option value="crucy.v3.23.1901.2014.USA.tmp.tsv">USA</option>
    <option value="crucy.v3.23.1901.2014.Uzbekistan.tmp.tsv">Uzbekistan</option>
    <option value="crucy.v3.23.1901.2014.Venezuela.tmp.tsv">Venezuela</option>
    <option value="crucy.v3.23.1901.2014.Vietnam.tmp.tsv">Vietnam</option>
    <option value="crucy.v3.23.1901.2014.Virgin_Isl.tmp.tsv">Virgin Islands</option>
    <option value="crucy.v3.23.1901.2014.Western_Sahara.tmp.tsv">Western Sahara</option>
    <option value="crucy.v3.23.1901.2014.Yemen.tmp.tsv">Yemen</option>
    <option value="crucy.v3.23.1901.2014.Zambia.tmp.tsv">Zambia</option>
    <option value="crucy.v3.23.1901.2014.Zimbabwe.tmp.tsv">Zimbabwe</option>    
    
</select>

<script>

    var margin = {top: 20, right: 40, bottom: 30, left: 20},
        width = 960 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom,
        barWidth = Math.floor(width / 19) - 1;
    
    var x = d3.scale.linear()
        .range([barWidth / 2, width - barWidth / 2]);
    
    var y = d3.scale.linear()
        .range([height, 0]);
    
    var yAxis = d3.svg.axis()
        .scale(y)
        .orient("right")
        .tickSize(-width)
        .tickFormat(function(d) { return Math.round((d / 1)) ; });
     var divs = d3.select("body").append("divs")	
        .attr("class", "tooltip")				
        .style("opacity", 0);
    // An SVG element with a bottom-right origin.
    var svg = d3.select("body").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
    
    // A sliding container to hold the bars by birthyear.
    var birthyears = svg.append("g")
        .attr("class", "birthyears");
    
    // A label for the current year.
    var title = svg.append("text")
        .attr("class", "title")
        .attr("dy", ".71em")
        .text(2014);
    var title2 = svg.append("text")
        .attr("class", "title2")
        .attr("dx","10em")
        .attr("dy", ".60em")
        .text("Afghanistan");

    d3.tsv("crucy.v3.23.1901.2014.Afghanistan.tmp.tsv", function(error, data) {
    
      // Convert strings to numbers.
      data.forEach(function(d) {
        d.temp = +d.temp;
    
        d.year = +d.year;
        d.month = +d.month;
      });
    
      // Compute the extent of the data set in age and years.
      var month1 = d3.max(data, function(d) { return d.month; }),
          year0 = d3.min(data, function(d) { return d.year; }),
          year1 = d3.max(data, function(d) { return d.year; }),
          year = year1;
    
      // Update the scale domains.
      x.domain([year1 - month1, year1]);
      y.domain([ -50,50]);
    
      
      // Produce a map from year and birthyear to [male, female].
      data = d3.nest()
          .key(function(d) { return d.year; })
          .key(function(d) { return d.year - d.month; })
          .rollup(function(v) { return v.map(function(d) { return d.temp; }); })
          .map(data);
    
      // Add an axis to show the population values.
      svg.append("g")
          .attr("class", "y axis")
          .attr("transform", "translate(" + width + ",0)")
          .call(yAxis)
        .selectAll("g")
        .filter(function(value) { return !value; })
          .classed("zero", true);
    
      // Add labeled rects for each birthyear (so that no enter or exit is required).
      var birthyear = birthyears.selectAll(".birthyear")
          .data(d3.range(year0 - month1, year1 + 1, 1))
        .enter().append("g")
          .attr("class", "birthyear")
          .attr("transform", function(birthyear) { return "translate(" + x(birthyear) + ",0)"; });
    
      birthyear.selectAll("rect")
          .data(function(birthyear) { return data[year][birthyear] || [-800, -800]; })
        .enter().append("rect")
          .attr("x", -barWidth / 2)
          .attr("width", barWidth)
          .attr("y", y)
          .attr("height", function(value) { return (height - y(value)); })       
           .on("mouseover", function(d) {		
                divs.transition()		
                    .duration(200)		
                    .style("opacity", .9);		
                    divs.html(d)
                    .style("left", (d3.event.pageX) + "px")		
                    .style("top", (d3.event.pageY) + "px");	
                })					
            .on("mouseout", function(d) {		
                divs.transition()		
                    .duration(500)		
                    .style("opacity", 0);	
            });
    
        svg.append("text")             
          .attr("transform",
                "translate(" + (width/2) + " ," + 
                               (height + margin.bottom ) + ")")
          .style("text-anchor", "middle")
          .text("Month");
    
        svg.append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 0 - margin.left)
          .attr("x",0 - (height / 2))
          .attr("dy", "1em")
          .style("text-anchor", "middle")
          .text("Temperature Â°C");  
    
    
      // Add labels to show age (separate; not animated).
      svg.selectAll(".month")
          .data(d3.range(0, month1 + 1, 1))
        .enter().append("text")
          .attr("class", "month")
          .attr("x", function(month) { return x(year - month); })
          .attr("y", height + 4)
          .attr("dy", ".71em")
    
          .text(function(month) { return month; });
    
    
      // Allow the arrow keys to change the displayed year.
      window.focus();
      d3.select(window).on("keydown", function() {
        switch (d3.event.keyCode) {
          case 37: year = Math.max(year0, year - 1); break;
          case 39: year = Math.min(year1, year + 1); break;
        }
        update();
      });
    
      function update() {
        if (!(year in data)) return;
        title.text(year);
    
        birthyears.transition()
            .duration(750)
            .attr("transform", "translate(" + (x(year1) - x(year)) + ",0)");
    
        birthyear.selectAll("rect")
            .data(function(birthyear) { return data[year][birthyear] || [-800, -800]; })
          .transition()
            .duration(750)
            .attr("y", y)
            .attr("height", function(value) { return height - y(value); });
      }
    });
    
    
    /*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
    
    Data Update for different countries
    
    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*/
    
    d3.select('#inds')
                .on("change", function () {
                    var sect = document.getElementById("inds");
                    var section = sect.options[sect.selectedIndex].value;
                    updateTest(section);
    
    
                
                //debugger
    
    
                });
    
    /*
    <input class="selector" type="button" value="Customers" id="test.tsv"/>
    <input class="selector" type="button" value="Employees" id="population.tsv"/>
    
    d3.selectAll('.selector')
                .on('click', function(d) {
                    updateTest(this.id);
                })@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@WAS SELECTOR FOR BUTTON. ^^^ REPLACES THIS*/                                        
    function updateTitle(source){
        var ret = source.replace(/crucy.v3.23.1901.2014./g,'');
        var ret2 = ret.replace(/.tmp.tsv/g,'');
        var ret3 = ret2.replace(/_/g,'');
        title2.text(ret3);
        }            
            // update function:
    function updateTest(source) {
            d3.tsv(source, function(error,data) {
    var ret = source.replace(/crucy.v3.23.1901.2014./g,'');
    var ret2 = ret.replace(/.tmp.tsv/g,'');
    var ret3 = ret2.replace(/_/g,' ');

    var titSource = updateTitle(source);

    
    title2.text(ret3)


    var x = d3.scale.linear()
        .range([barWidth / 2, width - barWidth / 2]);
    
    var y = d3.scale.linear()
        .range([height,0]);
    
    var yAxis = d3.svg.axis()
        .scale(y)
        .orient("right")
        .tickSize(-width)
        .tickFormat(function(d) { return Math.round(d / 1) ; });
    
    // A sliding container to hold the bars by birthyear.
    var birthyears = svg.append("g")
        .attr("class", "birthyears");
    
    // Convert strings to numbers.
    data.forEach(function(d) {
      d.temp = +d.temp;
    
      d.year = +d.year;
      d.month = +d.month;
    });
    var dot = svg.select('.birthyear').data(data)
    dot.exit().remove()
    
    // Compute the extent of the data set in age and years.
    var month1 = d3.max(data, function(d) { return d.month; }),
        year0 = d3.min(data, function(d) { return d.year; }),
        year1 = d3.max(data, function(d) { return d.year; }),
        year = year1;
    
    // Update the scale domains.
    x.domain([year1 - month1, year1]);
    y.domain([ -50,50]);
    //y.domain([d3.min(data, function(d) { return d.temp}) , d3.max(data, function(d) { return d.temp; })]);
    
    
    // Produce a map from year and birthyear to [male, female].
    data = d3.nest()
        .key(function(d) { return d.year; })
        .key(function(d) { return d.year - d.month; })
        .rollup(function(v) { return v.map(function(d) { return d.temp; }); })
        .map(data);
    var dot3 = svg.select('g').data(data)
    dot3.exit().remove()
    // Add an axis to show the population values.
    svg.append("g")
        .attr("class", "y axis")
        .attr("transform", "translate(" + width + ",0)")
        .call(yAxis)
      .selectAll("g")
      .filter(function(value) { return !value; })
        .classed("zero", true);
    
        var dot3 = svg.select('g').data(data)
    dot3.exit().remove()
    // Add labeled rects for each birthyear (so that no enter or exit is required).
    var birthyear = birthyears.selectAll(".birthyear")
        .data(d3.range(year0 - month1, year1 + 1, 1))
        
      .enter().append("g")
        .attr("class", "birthyear")
        .attr("transform", function(birthyear) { return "translate(" + x(birthyear) + ",0)"; });
    
    birthyear.selectAll("rect")
    
        .data(function(birthyear) { return data[year][birthyear] || [-800, -800]; })
      .enter().append("rect")
        .attr("x", -barWidth / 2)
        .attr("width", barWidth)
        .attr("y", y)
       
        .attr("height", function(value) { return height - y(value)  ; })       
         .on("mouseover", function(d) {		
              divs.transition()		
                  .duration(200)		
                  .style("opacity", .9);		
                  divs.html(d)
                  .style("left", (d3.event.pageX) + "px")		
                  .style("top", (d3.event.pageY) + "px");	
              })					
          .on("mouseout", function(d) {		
              divs.transition()		
                  .duration(500)		
                  .style("opacity", 0);	
          });
    
    // Add labels to show age (separate; not animated).
    svg.selectAll(".month")
        .data(d3.range(0, month1 + 1, 1))
      .enter().append("text")
        .attr("class", "month")
        .attr("x", function(month) { return x(year - month); })
        .attr("y", height + 4)
        .attr("dy", ".71em")
    
        .text(function(month) { return month; });
    
    
    // Allow the arrow keys to change the displayed year.
    window.focus();
    d3.select(window).on("keydown", function() {
      switch (d3.event.keyCode) {
        case 37: year = Math.max(year0, year - 1); break;
        case 39: year = Math.min(year1, year + 1); break;
      }
      update();
    });
    
    function update() {
      if (!(year in data)) return;
      title.text(year);
    
      birthyears.transition()
          .duration(750)
          .attr("transform", "translate(" + (x(year1) - x(year)) + ",0)");
    
      birthyear.selectAll("rect")
          .data(function(birthyear) { return data[year][birthyear] || [-800, -800]; })
        .transition()
          .duration(750)
          .attr("y", y)
          .attr("height", function(value) { return (height - y(value)) ; });
    }
    });
    
                        
            }
    </script>

</body>
</html>